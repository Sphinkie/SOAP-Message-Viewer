\hypertarget{class_file_parser}{}\doxysection{File\+Parser Class Reference}
\label{class_file_parser}\index{FileParser@{FileParser}}


La classe \mbox{\hyperlink{class_file_parser}{File\+Parser}} parse un fichier .SCVLOG et insère autant de lignes dans la List\+View de la fenêtre qu\textquotesingle{}il y a de messages SOAP dans le fichier.  




{\ttfamily \#include $<$File\+Parser.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_file_parser_a0841789c9e75d720801c3c4d5a666468}{open}} (std\+::string filename, const void $\ast$fenetre)
\begin{DoxyCompactList}\small\item\em Ouvre un fichier SVCLOG. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_file_parser_a09bc46c3ba8e88b76bf697e6a2e42322}{parse}} (bool use\+CRLF)
\begin{DoxyCompactList}\small\item\em Fonction principale pour déclencher le parsing par Expat. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_file_parser_afaeb2d28e432115ec845ebe4ff86d8f4}{close}} ()
\begin{DoxyCompactList}\small\item\em Ferme le fichier une fois le parsing terminé. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void XMLCALL \mbox{\hyperlink{class_file_parser_a65c0fa51c157302c7c87a5ef99dfb8c8}{start\+Element\+Handler}} (void $\ast$user\+Data, const XML\+\_\+\+Char $\ast$name, const XML\+\_\+\+Char $\ast$$\ast$atts)
\begin{DoxyCompactList}\small\item\em Ce handler (statique) est appelé à chaque balise ouvrante. Selon la balise, on cree un nouveau message, ou bien on stocke le body du message. La librairie Expat fournit une methode permettant de savoir à quel octet, on est dans le fichier XML\+: XML\+\_\+\+Get\+Current\+Byte\+Index(\+XML\+\_\+\+Parser p) \end{DoxyCompactList}\item 
static void XMLCALL \mbox{\hyperlink{class_file_parser_a196aa9b586af505b0921877b88946f09}{end\+Element\+Handler}} (void $\ast$user\+Data, const XML\+\_\+\+Char $\ast$name)
\begin{DoxyCompactList}\small\item\em Ce Handler est appelé à chaque balise fermante. On traite les informations stockées dans user\+Data. \end{DoxyCompactList}\item 
static void XMLCALL \mbox{\hyperlink{class_file_parser_a8287923cca0975333181d528c92d5c35}{data\+Handler}} (void $\ast$user\+Data, const XML\+\_\+\+Char $\ast$content, int length)
\begin{DoxyCompactList}\small\item\em Ce Handler est appelé à chaque fois qu\textquotesingle{}il y a un Content. Le Content\+Type a été positionné par le Handler Start\+Element. Si le Content est à cheval sur 2 buffers, le data\+Handler est appelé deux fois, et il faut concaténer. \mbox{\hyperlink{}{https\+://stackoverflow.\+com/questions/609376/geting-\/xml-\/data-\/using-\/xml-\/parser-\/expat\#609736.}}\end{DoxyCompactList}\item 
static void \mbox{\hyperlink{class_file_parser_ac0dee4dc1b67b81a26652701754507d1}{process\+Content\+Data}} (void $\ast$user\+Data)
\begin{DoxyCompactList}\small\item\em Mémorise dans le message, les informations contenue dans la variable statique content\+Data, en fonction du type mémorisé dans les user\+Data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_file_parser_aa4980a70e5b92e69f70d0dcef8ab2522}\label{class_file_parser_aa4980a70e5b92e69f70d0dcef8ab2522}} 
static const unsigned int {\bfseries MAX\+\_\+\+MESSAGES} = 32000
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
La classe \mbox{\hyperlink{class_file_parser}{File\+Parser}} parse un fichier .SCVLOG et insère autant de lignes dans la List\+View de la fenêtre qu\textquotesingle{}il y a de messages SOAP dans le fichier. 

\DoxyHorRuler{0}


La classe utilise le parser XML \textquotesingle{}Expat\textquotesingle{} qui est open-\/source, très rapide, et SAX (parsing au fil de l\textquotesingle{}eau). Elle gère les gros fichiers grace à un système de buffer. \DoxyHorRuler{0}
 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_file_parser_afaeb2d28e432115ec845ebe4ff86d8f4}\label{class_file_parser_afaeb2d28e432115ec845ebe4ff86d8f4}} 
\index{FileParser@{FileParser}!close@{close}}
\index{close@{close}!FileParser@{FileParser}}
\doxysubsubsection{\texorpdfstring{close()}{close()}}
{\footnotesize\ttfamily void File\+Parser\+::close (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Ferme le fichier une fois le parsing terminé. 

\DoxyHorRuler{0}
 \mbox{\Hypertarget{class_file_parser_a8287923cca0975333181d528c92d5c35}\label{class_file_parser_a8287923cca0975333181d528c92d5c35}} 
\index{FileParser@{FileParser}!dataHandler@{dataHandler}}
\index{dataHandler@{dataHandler}!FileParser@{FileParser}}
\doxysubsubsection{\texorpdfstring{dataHandler()}{dataHandler()}}
{\footnotesize\ttfamily void XMLCALL File\+Parser\+::data\+Handler (\begin{DoxyParamCaption}\item[{void $\ast$}]{user\+Data,  }\item[{const XML\+\_\+\+Char $\ast$}]{content,  }\item[{int}]{length }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Ce Handler est appelé à chaque fois qu\textquotesingle{}il y a un Content. Le Content\+Type a été positionné par le Handler Start\+Element. Si le Content est à cheval sur 2 buffers, le data\+Handler est appelé deux fois, et il faut concaténer. \mbox{\hyperlink{}{https\+://stackoverflow.\+com/questions/609376/geting-\/xml-\/data-\/using-\/xml-\/parser-\/expat\#609736.}}

\DoxyHorRuler{0}
 
\begin{DoxyParams}{Parameters}
{\em user\+Data} & \+: Non utilisé. \\
\hline
{\em content} & \+: le contenu texte de la section. \\
\hline
{\em length} & \+: Le Content n\textquotesingle{}est pas NULL-\/terminated\+: il faut utiliser length. \DoxyHorRuler{0}
 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_file_parser_a196aa9b586af505b0921877b88946f09}\label{class_file_parser_a196aa9b586af505b0921877b88946f09}} 
\index{FileParser@{FileParser}!endElementHandler@{endElementHandler}}
\index{endElementHandler@{endElementHandler}!FileParser@{FileParser}}
\doxysubsubsection{\texorpdfstring{endElementHandler()}{endElementHandler()}}
{\footnotesize\ttfamily void XMLCALL File\+Parser\+::end\+Element\+Handler (\begin{DoxyParamCaption}\item[{void $\ast$}]{user\+Data,  }\item[{const XML\+\_\+\+Char $\ast$}]{name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Ce Handler est appelé à chaque balise fermante. On traite les informations stockées dans user\+Data. 

\DoxyHorRuler{0}
 
\begin{DoxyParams}{Parameters}
{\em user\+Data} & \+: pointeur sur les données mémorisées lors de lors de l\textquotesingle{}ouverture des balises. \\
\hline
{\em name} & \+: le nom de la balise. \DoxyHorRuler{0}
 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_file_parser_a0841789c9e75d720801c3c4d5a666468}\label{class_file_parser_a0841789c9e75d720801c3c4d5a666468}} 
\index{FileParser@{FileParser}!open@{open}}
\index{open@{open}!FileParser@{FileParser}}
\doxysubsubsection{\texorpdfstring{open()}{open()}}
{\footnotesize\ttfamily void File\+Parser\+::open (\begin{DoxyParamCaption}\item[{std\+::string}]{filename,  }\item[{const void $\ast$}]{fenetre }\end{DoxyParamCaption})}



Ouvre un fichier SVCLOG. 

\DoxyHorRuler{0}
 
\begin{DoxyParams}{Parameters}
{\em filename} & \+: le nom du fichier SVCLOG à parser. \\
\hline
{\em fenetre} & \+: pointeur sur la fenetre contenant la list\+View de Message List. \DoxyHorRuler{0}
 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_file_parser_a09bc46c3ba8e88b76bf697e6a2e42322}\label{class_file_parser_a09bc46c3ba8e88b76bf697e6a2e42322}} 
\index{FileParser@{FileParser}!parse@{parse}}
\index{parse@{parse}!FileParser@{FileParser}}
\doxysubsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily int File\+Parser\+::parse (\begin{DoxyParamCaption}\item[{bool}]{use\+CRLF }\end{DoxyParamCaption})}



Fonction principale pour déclencher le parsing par Expat. 

\DoxyHorRuler{0}
 
\begin{DoxyParams}{Parameters}
{\em use\+CRLF} & \+: TRUE si le fichier contient des Retour Chariot au format Windows (CRLF)\+: typiquement des fichiers XML. FALSE si le fichier contient des Retour Chariot au format LINUX (LF) ou 1 seule ligne. Typiquement des fichiers SVCLOG \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Retourne un code d\textquotesingle{}erreur (0 si tout s\textquotesingle{}est bien passé). 
\end{DoxyReturn}
\mbox{\Hypertarget{class_file_parser_ac0dee4dc1b67b81a26652701754507d1}\label{class_file_parser_ac0dee4dc1b67b81a26652701754507d1}} 
\index{FileParser@{FileParser}!processContentData@{processContentData}}
\index{processContentData@{processContentData}!FileParser@{FileParser}}
\doxysubsubsection{\texorpdfstring{processContentData()}{processContentData()}}
{\footnotesize\ttfamily void File\+Parser\+::process\+Content\+Data (\begin{DoxyParamCaption}\item[{void $\ast$}]{user\+Data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Mémorise dans le message, les informations contenue dans la variable statique content\+Data, en fonction du type mémorisé dans les user\+Data. 

\DoxyHorRuler{0}
 
\begin{DoxyParams}{Parameters}
{\em user\+Data} & \+: pointeur sur les données mémorisées lors de lors de l\textquotesingle{}ouverture des balises. \DoxyHorRuler{0}
 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_file_parser_a65c0fa51c157302c7c87a5ef99dfb8c8}\label{class_file_parser_a65c0fa51c157302c7c87a5ef99dfb8c8}} 
\index{FileParser@{FileParser}!startElementHandler@{startElementHandler}}
\index{startElementHandler@{startElementHandler}!FileParser@{FileParser}}
\doxysubsubsection{\texorpdfstring{startElementHandler()}{startElementHandler()}}
{\footnotesize\ttfamily void XMLCALL File\+Parser\+::start\+Element\+Handler (\begin{DoxyParamCaption}\item[{void $\ast$}]{user\+Data,  }\item[{const XML\+\_\+\+Char $\ast$}]{name,  }\item[{const XML\+\_\+\+Char $\ast$$\ast$}]{atts }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Ce handler (statique) est appelé à chaque balise ouvrante. Selon la balise, on cree un nouveau message, ou bien on stocke le body du message. La librairie Expat fournit une methode permettant de savoir à quel octet, on est dans le fichier XML\+: XML\+\_\+\+Get\+Current\+Byte\+Index(\+XML\+\_\+\+Parser p) 

\DoxyHorRuler{0}
 
\begin{DoxyParams}{Parameters}
{\em user\+Data} & \+: Structure pour les données à mémoriser. \\
\hline
{\em name} & \+: Nom de la balise. \\
\hline
{\em attrs} & \+: Eventuel tableau des attributs. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Sources/File\+Parser.\+h\item 
Sources/File\+Parser.\+cpp\end{DoxyCompactItemize}
